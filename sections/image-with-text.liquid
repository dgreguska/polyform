{{ 'component-image-with-text.css' | asset_url | stylesheet_tag }}

{% render 'section-padding', id: section.id, padding_top: section.settings.padding_top, padding_bottom: section.settings.padding_bottom %}

<section
        class="section-{{ section.id }}-padding{% if section.settings.background_pattern != blank %} relative{% endif %}"
        style="background-color: {{ section.settings.background_color }}"
        id="section-{{ section.id }}">
    {% if section.settings.background_pattern != blank %}
        <div class="absolute left-0 top-0 w-full h-full flex items-start{% if section.settings.background_pattern_position == "center" %} justify-center{% elsif section.settings.background_pattern_position == "right" %} justify-end{% endif %}">
            {{ section.settings.background_pattern
            | image_url:
            height: section.settings.background_pattern.height
            | image_tag:
            class: "h-auto lg:h-full w-auto",
            loading: "lazy"
            }}
        </div>
    {% endif %}
{% if section.settings.full_width %}
    <div class="flex items-center max-sm:flex-col relative{% if section.settings.layout == 'text_first' %} md:flex-row-reverse{% endif %}">
        <div class="w-full md:w-1/2 overflow-hidden{% if section.settings.layout == 'text_first' %} md:ml-auto{% else %} md:mr-auto{% endif %}">
            <div data-aos="zoom-out" data-aos-duration="1000" class="relative min-h-full h-250{% if section.settings.height == 'small' %} md:h-400{% elsif section.settings.height == 'large' %} md:h-700{% endif %}"
                    {% if section.settings.height == 'adapt' and section.settings.image != blank %} style="padding-bottom: {{ 1 | divided_by: section.settings.image.aspect_ratio | times: 100 }}%;"{% endif %}
            >
                {%- if section.settings.image != blank -%}
                    {% liquid
                        assign page_width = 1440 | minus: 32
                        assign img_size = 1440 | divided_by: 2
                        assign img_size_2x = img_size | times: 2
                        assign img_alt = section.settings.image.alt | default: section.id
                    %}
                    <picture>
                        {% if section.settings.full_width %}
                            <source media="(min-width: 4096px)"
                                    srcset="{{ section.settings.image | image_url: width: 2048 }},
                                            {{ section.settings.image | image_url: width: 4096 }} 2x"/>
                            <source media="(min-width: 2890px)"
                                    srcset="{{ section.settings.image | image_url: width: 1445 }},
                                            {{ section.settings.image | image_url: width: 2890 }} 2x"/>
                            <source media="(min-width: 2200px)"
                                    srcset="{{ section.settings.image | image_url: width: 1100 }},
                                            {{ section.settings.image | image_url: width: 2200 }} 2x"/>
                            <source media="(min-width: 2048px)"
                                    srcset="{{ section.settings.image | image_url: width: 1024 }},
                                            {{ section.settings.image | image_url: width: 2048 }} 2x"/>
                            <source media="(min-width: 1680px)"
                                    srcset="{{ section.settings.image | image_url: width: 840 }},
                                            {{ section.settings.image | image_url: width: 1680 }} 2x"/>
                            <source media="(min-width: 1445px)"
                                    srcset="{{ section.settings.image | image_url: width: 722 }},
                                            {{ section.settings.image | image_url: width: 1444 }} 2x"/>
                        {% endif %}
                        <source media="(min-width: 1199px)"
                                srcset="{{ section.settings.image | image_url: width: 600 }},
                                        {{ section.settings.image | image_url: width: 1200 }} 2x"/>
                        <source media="(min-width: 990px)"
                                srcset="{{ section.settings.image | image_url: width: 495 }},
                                        {{ section.settings.image | image_url: width: 990 }} 2x"/>
                        <source media="(min-width: 767px)"
                                srcset="{{ section.settings.image | image_url: width: 384 }},
                                        {{ section.settings.image | image_url: width: 768 }} 2x"/>
                        <source media="(min-width: 550x)"
                                srcset="{{ section.settings.image | image_url: width: 550 }},
                                        {{ section.settings.image | image_url: width: 1110 }} 2x"/>
                        <source media="(min-width: 360px)"
                                srcset="{{ section.settings.image | image_url: width: 360 }},
                                        {{ section.settings.image | image_url: width: 720 }} 2x"/>
                        <source media="(min-width: 165px)"
                                srcset="{{ section.settings.image | image_url: width: 165 }},
                                        {{ section.settings.image | image_url: width: 330 }} 2x"/>
                        {{ section.settings.image | image_url: width: 600 | image_tag:
                        alt: img_alt,
                        loading: "lazy",
                        class: "absolute top-0 left-0 h-full w-full object-cover"
                        }}
                    </picture>
                {%- else -%}
                    {{ 'lifestyle-2' | placeholder_svg_tag: "absolute top-0 left-0 h-full w-full object-cover" }}
                {%- endif -%}
            </div>
        </div>
        <div class="md:absolute md:left-0 md:top-1/2 md:-translate-y-1/2 w-full h-full">
            {% endif %}
            <div class="container h-full relative">
                <div class="h-full row max-sm:flex-col {% if section.settings.desktop_content_position == 'middle' %} items-center {% elsif section.settings.desktop_content_position == 'bottom' %} items-end{% endif %}{% if section.settings.layout == 'text_first' %} md:flex-row-reverse{% endif %}">
                    {% unless section.settings.full_width %}
                        <div class="w-full md:w-1/2">
                            <div data-aos="zoom-out" data-aos-duration="1000" class="relative rounded-md overflow-hidden min-h-full h-250 {% if section.settings.height == 'small' %} md:h-400{% elsif section.settings.height == 'large' %} md:h-700{% endif %}"
                                    {% if section.settings.height == 'adapt' and section.settings.image != blank %} style="padding-bottom: {{ 1 | divided_by: section.settings.image.aspect_ratio | times: 100 }}%;"{% endif %}
                            >
                                {%- if section.settings.image != blank -%}
                                    {% liquid
                                        assign img_alt = section.settings.image.alt | default: section.id
                                    %}
                                    <picture>
                                        <source media="(min-width: 1440px)"
                                                srcset="{{ section.settings.image | image_url: width: 688 }},
                                                        {{ section.settings.image | image_url: width: 1376 }} 2x"/>
                                        <source media="(min-width: 1200px)"
                                                srcset="{{ section.settings.image | image_url: width: 544 }},
                                                        {{ section.settings.image | image_url: width: 1088 }} 2x"/>
                                        <source media="(min-width: 992px)"
                                                srcset="{{ section.settings.image | image_url: width: 448 }},
                                                        {{ section.settings.image | image_url: width: 896 }} 2x"/>
                                        <source media="(min-width: 768px)"
                                                srcset="{{ section.settings.image | image_url: width: 328 }},
                                                        {{ section.settings.image | image_url: width: 656 }} 2x"/>
                                        <source media="(min-width: 576x)"
                                                srcset="{{ section.settings.image | image_url: width: 508 }},
                                                        {{ section.settings.image | image_url: width: 1016 }} 2x"/>
                                        <source media="(min-width: 360px)"
                                                srcset="{{ section.settings.image | image_url: width: 360 }},
                                                        {{ section.settings.image | image_url: width: 720 }} 2x"/>
                                        <source media="(min-width: 165px)"
                                                srcset="{{ section.settings.image | image_url: width: 165 }},
                                                        {{ section.settings.image | image_url: width: 330 }} 2x"/>
                                        {{ section.settings.image | image_url: width: 600 | image_tag:
                                        alt: img_alt,
                                        loading: "lazy",
                                        class: "absolute top-0 left-0 h-full w-full object-cover"
                                        }}
                                    </picture>
                                {%- else -%}
                                    {{ 'lifestyle-2' | placeholder_svg_tag: "absolute top-0 left-0 h-full w-full object-cover" }}
                                {%- endif -%}
                            </div>
                        </div>
                    {% endunless %}
                    <div class="w-full md:w-5/12{% if section.settings.layout == 'text_first' %} md:mr-auto{% else %} md:ml-auto{% endif %} py-24 md:py-32">
                        <div id="section-{{ section.id }}-text" class="w-full max-w-460{% if section.settings.desktop_content_alignment == 'center' %} md:text-center md:mx-auto{% elsif section.settings.desktop_content_alignment == 'right' %} md:text-right md:ml-auto{% endif %}">
                            {%- for block in section.blocks -%}
                                {% case block.type %}
                                    {%- when 'tag' -%}
                                        {% if block.settings.tag != empty %}
                                            <p class="mb-16 md:mb-24 text-p-small{% if section.settings.text_theme == "light" %} text-light{% endif %}"
                                                    {{ block.shopify_attributes }}
                                               data-aos="fade-up" data-aos-anchor="#section-{{ section.id }}-text">
                                                {{ block.settings.tag | escape }}
                                            </p>
                                        {% endif %}
                                    {%- when 'heading' -%}
                                        <h2 class="h3{% if section.settings.text_theme == "light" %} text-light{% endif %}" {{ block.shopify_attributes }} data-aos="fade-up" data-aos-anchor="#section-{{ section.id }}-text">
                                            {{ block.settings.heading | escape }}
                                        </h2>
                                    {%- when 'subheading' -%}
                                        {% if block.settings.subheading != empty %}
                                            <div data-aos="fade-up" data-aos-anchor="#section-{{ section.id }}-text" class="mt-16 md:mt-24 h4 font-body font-normal{% if section.settings.text_theme == "light" %} text-light{% else %} text-dark-subdued{% endif %}" {{ block.shopify_attributes }}>
                                                {{ block.settings.subheading }}
                                            </div>
                                        {% endif %}
                                    {%- when 'text' -%}
                                        <div data-aos="fade-up" data-aos-anchor="#section-{{ section.id }}-text" class="mt-16 md:mt-24 text-p-small{% if section.settings.text_theme == "light" %} text-light{% else %} text-dark-60{% endif %}" {{ block.shopify_attributes }}>
                                            {{ block.settings.text }}
                                        </div>
                                    {%- when 'button' -%}
                                        {%- if block.settings.button_label != blank -%}
                                            <a{% if block.settings.button_link == blank %}
                                                role="link"
                                                aria-disabled="true"
                                            {% else %} href="{{ block.settings.button_link }}"{% endif %}
                                                    class="mt-24 md:mt-36 btn max-sm:w-full {{ block.settings.slide_button_type }}"
                                                    {{ block.shopify_attributes }}
                                                    data-aos="fade-up" data-aos-anchor="#section-{{ section.id }}-text">
                                                <span class="text">{{ block.settings.button_label | escape }}</span>
                                                {% render 'icon-right-arrow', class: "icon ml-8 w-16 h-16" %}
                                            </a>
                                        {%- endif -%}
                                {%- endcase -%}
                            {%- endfor -%}
                        </div>
                    </div>
                </div>
            </div>
            {% if section.settings.full_width %}
        </div>
    </div>
    {% endif %}
</section>

{% schema %}
{
  "name": "t:sections.image-with-text.name",
  "class": "section",
  "disabled_on": {
    "groups": [
      "header",
      "footer"
    ]
  },
  "settings": [
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "t:sections.video.settings.full_width.label",
      "default": false
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "t:sections.image-with-text.settings.image.label"
    },
    {
      "type": "select",
      "id": "height",
      "options": [
        {
          "value": "adapt",
          "label": "t:sections.image-with-text.settings.height.options__1.label"
        },
        {
          "value": "small",
          "label": "t:sections.image-with-text.settings.height.options__2.label"
        },
        {
          "value": "large",
          "label": "t:sections.image-with-text.settings.height.options__3.label"
        }
      ],
      "default": "adapt",
      "label": "t:sections.image-with-text.settings.height.label"
    },
    {
      "type": "select",
      "id": "layout",
      "options": [
        {
          "value": "image_first",
          "label": "t:sections.image-with-text.settings.layout.options__1.label"
        },
        {
          "value": "text_first",
          "label": "t:sections.image-with-text.settings.layout.options__2.label"
        }
      ],
      "default": "image_first",
      "label": "t:sections.image-with-text.settings.layout.label",
      "info": "t:sections.image-with-text.settings.layout.info"
    },
    {
      "type": "select",
      "id": "desktop_content_position",
      "options": [
        {
          "value": "top",
          "label": "t:sections.image-with-text.settings.desktop_content_position.options__1.label"
        },
        {
          "value": "middle",
          "label": "t:sections.image-with-text.settings.desktop_content_position.options__2.label"
        },
        {
          "value": "bottom",
          "label": "t:sections.image-with-text.settings.desktop_content_position.options__3.label"
        }
      ],
      "default": "middle",
      "label": "t:sections.image-with-text.settings.desktop_content_position.label"
    },
    {
      "type": "select",
      "id": "desktop_content_alignment",
      "options": [
        {
          "value": "left",
          "label": "t:sections.image-with-text.settings.desktop_content_alignment.options__1.label"
        },
        {
          "value": "center",
          "label": "t:sections.image-with-text.settings.desktop_content_alignment.options__2.label"
        },
        {
          "value": "right",
          "label": "t:sections.image-with-text.settings.desktop_content_alignment.options__3.label"
        }
      ],
      "default": "left",
      "label": "t:sections.image-with-text.settings.desktop_content_alignment.label"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "t:sections.featured-products.settings.background_color.label",
      "default": "#FFFFFF"
    },
    {
      "type": "select",
      "id": "text_theme",
      "label": "t:settings_schema.global.settings.text_theme.label",
      "options": [
        {
          "value": "dark",
          "label": "t:sections.all.text_theme.options.dark"
        },
        {
          "value": "light",
          "label": "t:sections.all.text_theme.options.light"
        }
      ],
      "default": "dark"
    },
    {
      "type": "header",
      "content": "t:sections.all.background_pattern.label"
    },
    {
      "type": "image_picker",
      "id": "background_pattern",
      "label": "t:sections.all.background_pattern.label"
    },
    {
      "type": "select",
      "id": "background_pattern_position",
      "label": "t:sections.all.background_pattern.position",
      "options": [
        {
          "value": "left",
          "label": "t:sections.all.background_pattern.options.option__1"
        },
        {
          "value": "center",
          "label": "t:sections.all.background_pattern.options.option__2"
        },
        {
          "value": "right",
          "label": "t:sections.all.background_pattern.options.option__3"
        }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 80
    }
  ],
  "blocks": [
    {
      "type": "tag",
      "name": "t:sections.image-with-text.blocks.tag",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "tag",
          "label": "t:sections.image-with-text.blocks.tag"
        }
      ]
    },
    {
      "type": "heading",
      "name": "t:sections.image-with-text.blocks.heading.name",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "default": "Heading",
          "label": "t:sections.image-with-text.blocks.heading.settings.heading.label"
        }
      ]
    },
    {
      "type": "subheading",
      "name": "t:sections.image-with-text.blocks.subheading.name",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "subheading",
          "label": "t:sections.image-with-text.blocks.subheading.settings.subheading.label"
        }
      ]
    },
    {
      "type": "text",
      "name": "t:sections.image-with-text.blocks.content.name",
      "limit": 1,
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "default": "<p>Pair text with an image to focus on your chosen product, collection, or blog post. Add details on availability, style, or even provide a review.</p>",
          "label": "t:sections.image-with-text.blocks.content.name"
        }
      ]
    },
    {
      "type": "button",
      "name": "t:settings_schema.global.settings.button.name",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "button_label",
          "default": "Button label",
          "label": "t:settings_schema.global.settings.button.label.label",
          "info": "t:settings_schema.global.settings.button.label.info"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "t:settings_schema.global.settings.button.link.label"
        },
        {
          "type": "select",
          "id": "slide_button_type",
          "label": "t:settings_schema.global.settings.button.type.label",
          "options": [
            {
              "value": "",
              "label": "t:settings_schema.global.settings.button.type.options.action"
            },
            {
              "value": "btn-primary",
              "label": "t:settings_schema.global.settings.button.type.options.primary"
            },
            {
              "value": "btn-outline",
              "label": "t:settings_schema.global.settings.button.type.options.outline"
            },
            {
              "value": "btn-inverted",
              "label": "t:settings_schema.global.settings.button.type.options.inverted"
            }
          ],
          "default": ""
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.image-with-text.name",
      "blocks": [
        {
          "type": "heading"
        },
        {
          "type": "subheading"
        },
        {
          "type": "text"
        },
        {
          "type": "button"
        }
      ]
    }
  ]
}
{% endschema %}