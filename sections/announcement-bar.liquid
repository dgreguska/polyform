{%- for block in section.blocks -%}
    {%- case block.type -%}
        {%- when 'announcement' -%}
            <div role="region" aria-label="{{ 'sections.header.announcement' | t }}"
                 style="background-color: {{ block.settings.background_color }}" {{ block.shopify_attributes }}>
                {%- if block.settings.text != blank -%}
                    {%- if block.settings.link != blank -%}
                        <a href="{{ block.settings.link }}" class="group block py-12">
                    {%- endif -%}
                    <div class="container text-{{ block.settings.text_alignment }}{% unless block.settings.link != blank %} py-12{% endunless %}">
                        <p class="inline-flex items-center text-p-small{% if block.settings.text_theme == "light" %} text-light{% else %} text-dark-material{% endif %}">
                            <span>{{ block.settings.text | escape }}</span>
                            {%- if block.settings.link != blank -%}
                                {% render 'icon-right-arrow', class: "ml-8 w-16 h-16 transition-transform group-hover:translate-x-4" %}
                            {%- endif -%}
                        </p>
                    </div>
                    {%- if block.settings.link != blank -%}
                        </a>
                    {%- endif -%}
                {%- endif -%}
            </div>
    {%- endcase -%}
{%- endfor -%}

{% schema %}
{
  "name": "t:sections.announcement-bar.name",
  "max_blocks": 12,
  "class": "announcement-bar-section",
  "blocks": [
    {
      "type": "announcement",
      "name": "t:sections.announcement-bar.blocks.announcement.name",
      "settings": [
        {
          "type": "color",
          "id": "background_color",
          "label": "t:sections.featured-products.settings.background_color.label",
          "default": "#FFFFFF"
        },
        {
          "type": "select",
          "id": "text_theme",
          "label": "t:settings_schema.global.settings.text_theme.label",
          "options": [
            {
              "value": "dark",
              "label": "t:sections.all.text_theme.options.dark"
            },
            {
              "value": "light",
              "label": "t:sections.all.text_theme.options.light"
            }
          ],
          "default": "dark"
        },
        {
          "type": "text",
          "id": "text",
          "default": "Welcome to our store",
          "label": "t:sections.announcement-bar.blocks.announcement.settings.text.label"
        },
        {
          "type": "select",
          "id": "text_alignment",
          "options": [
            {
              "value": "left",
              "label": "t:sections.announcement-bar.blocks.announcement.settings.text_alignment.options__1.label"
            },
            {
              "value": "center",
              "label": "t:sections.announcement-bar.blocks.announcement.settings.text_alignment.options__2.label"
            },
            {
              "value": "right",
              "label": "t:sections.announcement-bar.blocks.announcement.settings.text_alignment.options__3.label"
            }
          ],
          "default": "center",
          "label": "t:sections.announcement-bar.blocks.announcement.settings.text_alignment.label"
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:sections.announcement-bar.blocks.announcement.settings.link.label"
        }
      ]
    }
  ],
  "default": {
    "blocks": [
      {
        "type": "announcement"
      }
    ]
  }
}
{% endschema %}
